# ============================================
# MHMFinds Environment Variables
# ============================================
# Copy this file to .env and fill in the actual values
# NEVER commit .env to git - it contains secrets!
# ============================================

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string
# For local development: postgresql://user:password@localhost:5432/modvault
# For Vercel Postgres: Get from Vercel dashboard
# For Neon: Get from neon.tech console (use pooled connection)
# For Supabase: Get from Supabase dashboard (use port 6543 for pooling)
DATABASE_URL="postgresql://user:password@localhost:5432/modvault"

# Direct database URL (for migrations only - Neon/Supabase)
# Use non-pooled connection for schema migrations
# Comment out if using local PostgreSQL or Vercel Postgres
# DIRECT_DATABASE_URL="postgresql://user:password@host:5432/database?sslmode=require"

# ============================================
# NEXTAUTH CONFIGURATION
# ============================================
# Your application URL (http://localhost:3000 for dev, https://yourdomain.com for prod)
NEXTAUTH_URL="http://localhost:3000"

# NextAuth secret for JWT signing (generate with: openssl rand -base64 32)
# CRITICAL: Generate a new secret for production!
NEXTAUTH_SECRET="REPLACE_WITH_RANDOM_SECRET_USE_OPENSSL_RAND_BASE64_32"

# ============================================
# OAUTH PROVIDERS
# ============================================

# Google OAuth (https://console.cloud.google.com)
# Create OAuth 2.0 Client ID at Google Cloud Console
# Authorized redirect URI: {NEXTAUTH_URL}/api/auth/callback/google
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="GOCSPX-xxxxxxxxxxxxxxxxxxxxx"

# Discord OAuth (https://discord.com/developers/applications)
# Create application and add OAuth2 redirect
# Redirect URI: {NEXTAUTH_URL}/api/auth/callback/discord
DISCORD_CLIENT_ID="your-discord-client-id"
DISCORD_CLIENT_SECRET="your-discord-client-secret"

# ============================================
# OPENAI API (AI Search & Recommendations)
# ============================================
# Get from: https://platform.openai.com/api-keys
# Required for: Semantic search, mod recommendations, AI categorization
OPENAI_API_KEY="sk-proj-xxxxxxxxxxxxxxxxxxxxx"

# Optional: Perplexity AI (for research and creator discovery)
# Get from: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY="pplx-xxxxxxxxxxxxxxxxxxxxx"

# ============================================
# STRIPE (Payment Processing)
# ============================================
# Get from: https://dashboard.stripe.com/apikeys
# Use test keys (sk_test_, pk_test_) for development
# Use live keys (sk_live_, pk_live_) for production

# Secret key (server-side only)
STRIPE_SECRET_KEY="sk_test_xxxxxxxxxxxxxxxxxxxxx"

# Publishable key (client-side safe)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_xxxxxxxxxxxxxxxxxxxxx"

# Webhook secret (from Stripe Dashboard â†’ Webhooks)
# Get after creating webhook endpoint: /api/webhooks/stripe
STRIPE_WEBHOOK_SECRET="whsec_xxxxxxxxxxxxxxxxxxxxx"

# Stripe Price IDs (create products in Stripe Dashboard first)
# Standard tier - Monthly
STRIPE_STANDARD_MONTHLY_PRICE_ID="price_xxxxxxxxxxxxxxxxxxxxx"

# Standard tier - Yearly
STRIPE_STANDARD_YEARLY_PRICE_ID="price_xxxxxxxxxxxxxxxxxxxxx"

# Premium tier - Monthly
STRIPE_PREMIUM_MONTHLY_PRICE_ID="price_xxxxxxxxxxxxxxxxxxxxx"

# Premium tier - Yearly
STRIPE_PREMIUM_YEARLY_PRICE_ID="price_xxxxxxxxxxxxxxxxxxxxx"

# ============================================
# REDIS (Caching & Rate Limiting)
# ============================================
# CRITICAL FOR PRODUCTION: Required for rate limiting, caching, and performance
# Recommended: Upstash Redis (https://upstash.com) - serverless, free tier available
# Alternative: Redis Cloud, AWS ElastiCache

# Upstash Redis URL
REDIS_URL="redis://default:xxxxx@flying-bird-12345.upstash.io:6379"

# Upstash Redis Token (REST API)
REDIS_TOKEN="xxxxxxxxxxxxxxxxxxxxx"

# ============================================
# VECTOR DATABASE (Future: AI Search)
# ============================================
# Optional: For advanced semantic search
# Pinecone (https://www.pinecone.io)
# PINECONE_API_KEY="xxxxxxxxxxxxxxxxxxxxx"
# PINECONE_ENVIRONMENT="us-west1-gcp"
# PINECONE_INDEX_NAME="modvault-embeddings"

# ============================================
# CONTENT SOURCE APIS
# ============================================

# CurseForge API (for mod aggregation)
# Get from: https://docs.curseforge.com
# CURSEFORGE_API_KEY="your-curseforge-api-key"

# Patreon API (for creator content)
# Get from: https://www.patreon.com/portal/registration/register-clients
# PATREON_CLIENT_ID="your-patreon-client-id"
# PATREON_CLIENT_SECRET="your-patreon-client-secret"

# ============================================
# EMAIL SERVICE (Notifications)
# ============================================
# Choose one: SendGrid, Resend, AWS SES, Mailgun

# Option 1: Resend (Recommended, modern, great DX)
# Get from: https://resend.com
# RESEND_API_KEY="re_xxxxxxxxxxxxxxxxxxxxx"

# Option 2: SendGrid (Established, reliable)
# Get from: https://app.sendgrid.com/settings/api_keys
# SENDGRID_API_KEY="SG.xxxxxxxxxxxxxxxxxxxxx"

# From email address (must be verified with your email service)
FROM_EMAIL="noreply@yourdomain.com"

# ============================================
# FILE STORAGE (User Uploads)
# ============================================
# Optional: For user-uploaded images, mod files
# AWS S3 or compatible (Cloudflare R2, DigitalOcean Spaces)

# AWS S3 Configuration
# AWS_ACCESS_KEY_ID="your-aws-access-key"
# AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
# AWS_REGION="us-east-1"
# AWS_S3_BUCKET="modvault-assets"

# Alternative: Cloudinary (image CDN)
# CLOUDINARY_CLOUD_NAME="your-cloud-name"
# CLOUDINARY_API_KEY="xxxxxxxxxxxxxxxxxxxxx"
# CLOUDINARY_API_SECRET="xxxxxxxxxxxxxxxxxxxxx"

# ============================================
# MONITORING & ANALYTICS
# ============================================

# Sentry (Error Tracking & Performance Monitoring)
# Get from: https://sentry.io
# SENTRY_DSN="https://xxxxx@o123456.ingest.sentry.io/123456"
# NEXT_PUBLIC_SENTRY_DSN="https://xxxxx@o123456.ingest.sentry.io/123456"

# Google Analytics (Optional)
# Get from: https://analytics.google.com
# NEXT_PUBLIC_GA_MEASUREMENT_ID="G-XXXXXXXXXX"

# Mixpanel (Product Analytics - Optional)
# Get from: https://mixpanel.com
# MIXPANEL_TOKEN="xxxxxxxxxxxxxxxxxxxxx"

# ============================================
# SEARCH (Future Enhancement)
# ============================================
# Elasticsearch or Algolia for advanced search
# ELASTICSEARCH_URL="http://localhost:9200"
# ALGOLIA_APP_ID="xxxxxxxxxxxxxxxxxxxxx"
# ALGOLIA_API_KEY="xxxxxxxxxxxxxxxxxxxxx"

# ============================================
# SECURITY
# ============================================

# Cron job secret (generate with: openssl rand -hex 32)
# Used to secure cron endpoints from unauthorized access
# Add as Authorization: Bearer {CRON_SECRET} header
CRON_SECRET="REPLACE_WITH_RANDOM_SECRET_USE_OPENSSL_RAND_HEX_32"

# Cloudflare Turnstile (CAPTCHA)
# Get from: https://dash.cloudflare.com/
# Free tier: 1M requests/month, privacy-friendly alternative to reCAPTCHA
# IMPORTANT: Use test keys for development
NEXT_PUBLIC_TURNSTILE_SITE_KEY="1x00000000000000000000AA" # Use test key or get from Cloudflare
TURNSTILE_SECRET_KEY="1x0000000000000000000000000000000AA" # Use test key or get from Cloudflare

# Admin account credentials (for initial setup)
# CRITICAL: Change these immediately after first login!
# Generate strong password: openssl rand -base64 32
ADMIN_USERNAME="adminuser45"
ADMIN_PASSWORD="5GbHE%X9c%#tIg4i"

# Allowed origins for CORS (comma-separated)
# Example: "https://yourdomain.com,https://www.yourdomain.com"
ALLOWED_ORIGINS="http://localhost:3000"

# ============================================
# APPLICATION SETTINGS
# ============================================

# Node environment (development, production, test)
NODE_ENV="development"

# Debug mode (for development only)
# Set to empty string or remove in production
DEBUG="modvault:*"

# ============================================
# CONTENT AGGREGATION SETTINGS
# ============================================

# Privacy level for web scraping (default, stealth, conservative)
# See docs/PRIVACY_AGGREGATION_GUIDE.md for details
PRIVACY_LEVEL="default"

# Use AI-powered scraper (slower but more accurate)
# Set to true to enable Ollama-based content parsing
USE_AI_SCRAPER="false"

# Ollama Configuration (only if USE_AI_SCRAPER=true)
# Requires Ollama running locally: https://ollama.ai
USE_OLLAMA="true"
OLLAMA_BASE_URL="http://localhost:11434/v1"
OLLAMA_MODEL="llama3.2:3b"

# ============================================
# RATE LIMITING (Production)
# ============================================
# These are used by @upstash/ratelimit
# Adjust based on your tier expectations

# Default rate limits (can be overridden per endpoint)
RATE_LIMIT_FREE_TIER="20" # requests per minute
RATE_LIMIT_STANDARD_TIER="100"
RATE_LIMIT_PREMIUM_TIER="500"
RATE_LIMIT_ADMIN_TIER="1000"

# ============================================
# FEATURE FLAGS (Optional)
# ============================================
# Toggle features on/off without code changes

# Enable AI-powered recommendations
FEATURE_AI_RECOMMENDATIONS="true"

# Enable creator monetization
FEATURE_CREATOR_MONETIZATION="false"

# Enable social features (comments, sharing)
FEATURE_SOCIAL="false"

# Enable advanced analytics
FEATURE_ANALYTICS="false"

# ============================================
# NOTES
# ============================================
# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in all values marked with "your-" or "xxxxx"
# 3. Generate secrets using openssl (see comments above)
# 4. Never commit .env to git (it's in .gitignore)
# 5. For production, set all values in Vercel dashboard
# 6. Test locally before deploying: npm run dev
# 7. Verify deployment: npm run build

# ============================================
# REQUIRED FOR BASIC FUNCTIONALITY
# ============================================
# Minimum required for app to run:
# - DATABASE_URL
# - NEXTAUTH_URL
# - NEXTAUTH_SECRET

# Recommended for production:
# - All OAuth providers (Google, Discord)
# - STRIPE_* (for monetization)
# - REDIS_URL (for rate limiting)
# - OPENAI_API_KEY (for AI features)
# - Email service (RESEND_API_KEY or SENDGRID_API_KEY)
# - SENTRY_DSN (for error monitoring)

# ============================================
# GETTING HELP
# ============================================
# Documentation: /docs/VERCEL_DEPLOYMENT.md
# Security: /docs/SECURITY_HARDENING.md
# Performance: /docs/PERFORMANCE_OPTIMIZATION.md
